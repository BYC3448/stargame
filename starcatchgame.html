<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>별똥별 잡기</title>
    <style>
        /* --- 폰트 및 기본 스타일 --- */
        @import url('https://fonts.googleapis.com/css2?family=DotGothic16&display=swap');

        :root {
            --bg-color: #0d1a2e;
            --text-color: #f0f8ff;
            --star-color: #fffb8a;
            --accent-color: #ffaacb;
            --shadow-color: #060c14;
        }

        body {
            font-family: 'DotGothic16', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
            text-align: center;
        }

        /* --- 게임 컨테이너 --- */
        #game-container {
            width: 95vw;
            max-width: 600px;
            height: 80vh;
            max-height: 800px;
            background: linear-gradient(180deg, #1e3a5f, #0d1a2e 70%);
            border: 4px solid var(--text-color);
            box-shadow: 0 0 0 4px var(--shadow-color), 8px 8px 0 0 var(--shadow-color);
            position: relative;
            overflow: hidden;
            cursor: crosshair;
        }

        /* --- UI 요소 (점수, 시간, 버튼) --- */
        #ui-container {
            position: absolute;
            top: 10px;
            left: 10px;
            right: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 20px;
            text-shadow: 2px 2px 0 var(--shadow-color);
            z-index: 10;
        }

        #start-button {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-family: 'DotGothic16', sans-serif;
            font-size: 24px;
            padding: 15px 30px;
            background-color: var(--accent-color);
            color: var(--shadow-color);
            border: 4px solid var(--shadow-color);
            cursor: pointer;
            transition: all 0.1s ease;
            box-shadow: 4px 4px 0 0 var(--shadow-color);
            z-index: 20;
        }

        #start-button:hover {
            transform: translate(-50%, -50%) translate(2px, 2px);
            box-shadow: 2px 2px 0 0 var(--shadow-color);
        }

        #start-button:active {
            transform: translate(-50%, -50%) translate(4px, 4px);
            box-shadow: 0 0 0 0 var(--shadow-color);
        }

        #start-button:disabled {
            display: none;
        }
        
        #game-over-text {
            display: none;
            position: absolute;
            top: 40%;
            left: 50%;
            transform: translateX(-50%);
            font-size: 32px;
            text-shadow: 3px 3px 0 var(--shadow-color);
            z-index: 20;
        }

        /* --- 별똥별 스타일 --- */
        .star {
            position: absolute;
            width: 20px;
            height: 20px;
            background-color: var(--star-color);
            box-shadow: 0 0 10px var(--star-color);
            /* 픽셀 모양을 위한 설정 */
            image-rendering: pixelated;
            clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
            animation: fall linear forwards;
            z-index: 5;
            user-select: none;
        }

        /* --- 소원 텍스트 --- */
        .wish-text {
            position: absolute;
            color: var(--accent-color);
            font-size: 18px;
            animation: fadeOut 1s forwards;
            z-index: 15;
            pointer-events: none; /* 텍스트가 클릭을 방해하지 않도록 함 */
            text-shadow: 2px 2px 0 var(--shadow-color);
        }

        /* --- 애니메이션 --- */
        @keyframes fall {
            from {
                transform: translateY(-30px) rotate(-45deg);
            }
            to {
                transform: translateY(calc(80vh + 30px)) rotate(-45deg);
            }
        }

        @keyframes fadeOut {
            from {
                opacity: 1;
                transform: translateY(0);
            }
            to {
                opacity: 0;
                transform: translateY(-20px);
            }
        }

    </style>
</head>
<body>

    <div id="game-container">
        <div id="ui-container">
            <div id="score">점수: 0</div>
            <div id="timer">시간: 20</div>
        </div>
        <div id="game-over-text">게임 종료!</div>
        <button id="start-button">시작</button>
    </div>

    <script>
        // --- DOM 요소 가져오기 ---
        const gameContainer = document.getElementById('game-container');
        const scoreDisplay = document.getElementById('score');
        const timerDisplay = document.getElementById('timer');
        const startButton = document.getElementById('start-button'); // ID 수정: 'startButton' -> 'start-button'
        const gameOverText = document.getElementById('game-over-text');

        // --- 게임 상태 변수 ---
        let score = 0;
        let timeLeft = 20;
        let gameInterval = null;
        let starCreationInterval = null;
        const GAME_DURATION = 20;

        // --- 이벤트 리스너 설정 ---
        startButton.addEventListener('click', startGame);

        // --- 게임 시작 함수 ---
        function startGame() {
            // 1. 게임 상태 초기화
            score = 0;
            timeLeft = GAME_DURATION;
            scoreDisplay.textContent = `점수: ${score}`;
            timerDisplay.textContent = `시간: ${timeLeft}`;
            
            // 2. UI 업데이트
            startButton.disabled = true;
            gameOverText.style.display = 'none';

            // 3. 게임 루프 시작
            // 3-1. 1초마다 시간 감소
            gameInterval = setInterval(() => {
                timeLeft--;
                timerDisplay.textContent = `시간: ${timeLeft}`;
                if (timeLeft <= 0) {
                    endGame();
                }
            }, 1000);

            // 3-2. 주기적으로 별 생성
            starCreationInterval = setInterval(createStar, 500);
        }

        // --- 게임 종료 함수 ---
        function endGame() {
            // 1. 모든 인터벌 중지
            clearInterval(gameInterval);
            clearInterval(starCreationInterval);

            // 2. UI 업데이트
            gameOverText.style.display = 'block';
            gameOverText.textContent = `최종 점수: ${score}점!`;
            startButton.disabled = false;
            
            // 3. 남아있는 모든 별 제거
            document.querySelectorAll('.star').forEach(star => star.remove());
        }

        // --- 별 생성 함수 ---
        function createStar() {
            const star = document.createElement('div');
            star.classList.add('star');

            // 랜덤 위치 및 속도 설정
            const horizontalPosition = Math.random() * (gameContainer.clientWidth - 20);
            const fallDuration = Math.random() * 2 + 3; // 3초 ~ 5초 사이
            
            star.style.left = `${horizontalPosition}px`;
            star.style.animationDuration = `${fallDuration}s`;
            
            // 클릭 이벤트 추가
            star.addEventListener('click', catchStar);

            // 별이 화면 밖으로 나가면 제거
            star.addEventListener('animationend', () => {
                star.remove();
            });
            
            gameContainer.appendChild(star);
        }

        // --- 별 잡기 함수 ---
        function catchStar(event) {
            // 1. 점수 증가 및 UI 업데이트
            score++;
            scoreDisplay.textContent = `점수: ${score}`;

            // 2. 클릭된 별의 위치 가져오기
            const star = event.target;
            const starRect = star.getBoundingClientRect();
            const containerRect = gameContainer.getBoundingClientRect();
            
            const posX = starRect.left - containerRect.left;
            const posY = starRect.top - containerRect.top;

            // 3. "Make a wish!" 텍스트 표시
            showWishText(posX, posY);

            // 4. 클릭된 별 제거
            star.remove();
        }

        // --- 소원 텍스트 표시 함수 ---
        function showWishText(x, y) {
            const wishText = document.createElement('div');
            wishText.classList.add('wish-text');
            wishText.textContent = 'Make a wish!';
            wishText.style.left = `${x}px`;
            wishText.style.top = `${y}px`;
            
            gameContainer.appendChild(wishText);

            // 1초 뒤에 텍스트 제거
            setTimeout(() => {
                wishText.remove();
            }, 1000);
        }

    </script>
</body>
</html>

